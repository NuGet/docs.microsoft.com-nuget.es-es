---
title: ¿Qué ocurre cuando se instala un paquete?
description: Información detallada sobre el proceso de instalación de paquetes
author: karann-msft
ms.author: karann
ms.date: 06/20/2019
ms.topic: conceptual
ms.openlocfilehash: 1ae030c308b14b8884fb608c1683c8c46000b0bd
ms.sourcegitcommit: 415c70d7014545c1f65271a2debf8c3c1c5eb688
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/06/2020
ms.locfileid: "77036908"
---
# <a name="what-happens-when-a-nuget-package-is-installed"></a><span data-ttu-id="c3233-103">¿Qué ocurre cuando se instala un paquete NuGet?</span><span class="sxs-lookup"><span data-stu-id="c3233-103">What happens when a NuGet package is installed?</span></span>

<span data-ttu-id="c3233-104">En pocas palabras, las distintas herramientas de NuGet suelen crear una referencia a un paquete en el archivo de proyecto o `packages.config` y luego realizan la restauración del paquete, lo que realmente instala el paquete.</span><span class="sxs-lookup"><span data-stu-id="c3233-104">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="c3233-105">La excepción es `nuget install`, que solo expande el paquete en una carpeta `packages` y no modifica ningún otro archivo.</span><span class="sxs-lookup"><span data-stu-id="c3233-105">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="c3233-106">El proceso general es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="c3233-106">The general process is as follows:</span></span>

1. <span data-ttu-id="c3233-107">(Todas las herramientas excepto `nuget.exe`) Registre el identificador y la versión de paquete en el archivo del proyecto o en `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="c3233-107">(All tools except `nuget.exe`) Record the package identifier and version into the project file or `packages.config`.</span></span>

   <span data-ttu-id="c3233-108">Si la herramienta de instalación es Visual Studio o la CLI de dotnet, la herramienta intenta primero instalar el paquete.</span><span class="sxs-lookup"><span data-stu-id="c3233-108">If the installation tool is Visual Studio or the dotnet CLI, the tool first attempts to install the package.</span></span> <span data-ttu-id="c3233-109">Si es incompatible, el paquete no se agrega al archivo del proyecto o a `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="c3233-109">If it's incompatible, the package is not added to the project file or `packages.config`.</span></span>

2. <span data-ttu-id="c3233-110">Adquirir el paquete:</span><span class="sxs-lookup"><span data-stu-id="c3233-110">Acquire the package:</span></span>
   - <span data-ttu-id="c3233-111">Compruebe si el paquete (por el número de versión y el identificador exacto) ya está instalado en la carpeta *global-packages*, tal y como se describe en [Administración de paquetes globales y carpetas de caché](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-111">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="c3233-112">Si el paquete no se encuentra en la carpeta *global-packages*, intente recuperarlo de los orígenes indicados en los [archivos de configuración](../consume-packages/Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-112">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed in the [configuration files](../consume-packages/Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="c3233-113">En el caso de los orígenes en línea, intente primero recuperar el paquete de la memoria caché HTTP, a menos que `-NoCache` se especifique con comandos `nuget.exe` o `--no-cache` se especifique con `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="c3233-113">For online sources, attempt first to retrieve the package from the HTTP cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="c3233-114">(Visual Studio y `dotnet add package` utilizan siempre la memoria caché). Si se usa un paquete de la memoria caché, "CACHE" aparece en la salida.</span><span class="sxs-lookup"><span data-stu-id="c3233-114">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="c3233-115">La memoria caché tiene un plazo de expiración de 30 minutos.</span><span class="sxs-lookup"><span data-stu-id="c3233-115">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="c3233-116">Si el paquete no está en la caché HTTP, intente descargarlo de los orígenes indicados en la configuración.</span><span class="sxs-lookup"><span data-stu-id="c3233-116">If the package is not in the HTTP cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="c3233-117">Si se descarga un paquete, "GET" y "Aceptar" aparecen en la salida.</span><span class="sxs-lookup"><span data-stu-id="c3233-117">If a package is downloaded, "GET" and "OK" appear in the output.</span></span> <span data-ttu-id="c3233-118">NuGet registra el tráfico HTTP en el nivel de detalle normal.</span><span class="sxs-lookup"><span data-stu-id="c3233-118">NuGet logs http traffic on normal verbosity.</span></span>

   - <span data-ttu-id="c3233-119">Si el paquete no se puede adquirir correctamente desde ningún origen, la instalación no se completa en este momento y genera un mensaje de error como, por ejemplo, [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-119">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="c3233-120">Tenga en cuenta que los errores de los comandos `nuget.exe` solo muestran el último origen comprobado, pero esto implica que el paquete no estaba disponible en ningún origen.</span><span class="sxs-lookup"><span data-stu-id="c3233-120">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="c3233-121">Al adquirir el paquete, es posible que se aplique el orden de los orígenes en la configuración de NuGet:</span><span class="sxs-lookup"><span data-stu-id="c3233-121">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="c3233-122">NuGet comprueba la carpeta local de orígenes y los recursos compartidos de red antes de comprobar los orígenes HTTP.</span><span class="sxs-lookup"><span data-stu-id="c3233-122">NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

3. <span data-ttu-id="c3233-123">Guarde una copia del paquete y otra información en la carpeta *http-cache*, tal y como se describe en [Administración de las carpetas de paquetes globales, de caché y temporales](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-123">Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="c3233-124">Si se descarga, instale el paquete en la carpeta *global-packages* por usuario.</span><span class="sxs-lookup"><span data-stu-id="c3233-124">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="c3233-125">NuGet crea una subcarpeta para cada identificador de paquete y luego crea subcarpetas para cada versión instalada del paquete.</span><span class="sxs-lookup"><span data-stu-id="c3233-125">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="c3233-126">NuGet instala las dependencias de paquetes según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="c3233-126">NuGet installs package dependencies as required.</span></span> <span data-ttu-id="c3233-127">Puede que este proceso actualice las versiones del paquete en el proceso, tal y como se describe en el artículo sobre [resolución de dependencias](../concepts/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-127">This process might update package versions in the process, as described in [Dependency Resolution](../concepts/dependency-resolution.md).</span></span>

6. <span data-ttu-id="c3233-128">Actualice otros archivos y carpetas del proyecto:</span><span class="sxs-lookup"><span data-stu-id="c3233-128">Update other project files and folders:</span></span>

    - <span data-ttu-id="c3233-129">En el caso de los proyectos con PackageReference, actualice el gráfico de dependencias de paquetes almacenado en `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="c3233-129">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="c3233-130">El contenido mismo del paquete no se copia en ninguna carpeta del proyecto.</span><span class="sxs-lookup"><span data-stu-id="c3233-130">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="c3233-131">Actualice `app.config` o `web.config` si el paquete utiliza [transformaciones de archivos de origen y configuración](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="c3233-131">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

7. <span data-ttu-id="c3233-132">(Solo visual Studio) Muestre al archivo Léame del paquete, si está disponible, en una ventana de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c3233-132">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

<span data-ttu-id="c3233-133">¡Disfrute del proceso de codificación productiva con los paquetes de NuGet!</span><span class="sxs-lookup"><span data-stu-id="c3233-133">Enjoy your productive coding with NuGet packages!</span></span>
